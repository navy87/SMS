<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="common/header :: common-header"></head>
<body>
<div class="main_content">
    <div th:replace="common/header :: navbar-fragment"></div>
    <div class="row">
        <div class="col col-2">
            <img class="img-thumbnail rounded-0" th:src="@{/images/placeholder/placeholder2.webp}" th:alt="${user.username}">
            <h1 class="h1" th:text="${user.profile.fullName}">James Maddison</h1>
        </div>
        <div class="col col-8">
            <p>Username: <span th:text="${user.username}">@JohnDoe</span></p>
            <p>Name: <span th:text="${user.profile.fullName}">John Doe</span></p>
            <p>Email: <span th:text="${user.profile.email}">him@him.her</span></p>
            <p>Phone: <span th:text="${user.profile.phone}">5396667845</span></p>
            <form class="form-control" action="#" th:action="@{/users/changeRole(uid = ${user.id})}" method="post" th:object="${role}">
                Role:
                <select class="form-control form-select" th:field="*{id}">
                    <option th:each="role : ${allRoles}" th:value="${role.id}" th:text="${role.name}"></option>
                </select>
                <input type="submit" value="Change Role" class="btn btn-success btn-sm">
            </form>
        </div>
        <a th:href="@{delete(id=${user.id})}" class="btn btn-danger">Delete</a>
        <form th:object="${permissions}" th:action="@{/users/{id}(id=${user.id})}" method="post">
            <div class="permissions">
                <table class="table table-striped table-light">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Permission</th>
                        <th>Read</th>
                        <th>Write</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="authority, iterStat : ${allAuthorities.keySet()}">
                        <td th:text="${iterStat.count}">1</td>
                        <td th:text="${authority}">Category</td>
                        <td>
                            <input type="checkbox" value="" name="idPermission" th:value="${authority} + ':read'" th:checked="${allAuthorities.get(authority)[0]}"/>
                        </td>
                        <td>
                            <input type="checkbox" value="" name="idPermission" th:value="${authority} + ':write'" th:checked="${allAuthorities.get(authority)[1]}"/>
                        </td>
                    </tr>
                    <tr>
                        <td th:text="'XX'">1</td>
                        <td th:text="'View Store Report'">User</td>
                        <td>
                            <p><input type="checkbox" name="idPermission" value="report:store" th:checked="${reportPermissions[0]}"/> Store Report</p>
                        </td>
                        <td>
                            <p><input type="checkbox" name="idPermission" value="report:all" th:checked="${reportPermissions[1]}"/> All Report</p>
                        </td>
                    </tr>

                    </tbody>
                </table>
            </div>
            <input type="submit" value="save" class="btn btn-success">
        </form>

    </div>

</div>

<div th:replace="common/header :: body-bottom-scripts"></div>
</body>
</html>